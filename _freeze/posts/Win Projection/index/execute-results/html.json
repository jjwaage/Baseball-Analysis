{
  "hash": "de4c848b05ba432a456900a5e9b62c03",
  "result": {
    "markdown": "---\ntitle: \"Estimating Playoffs Based on the Previous Year's Data\"\nauthor: \"Jonna Waage\"\ndate: \"2023-05-31\"\n---\n\n\n## Can the MLB Playoff contending teams be estimated with last year's data?\n\n<!-- ::: callout-note -->\n\n<!-- Need a punchier question here. -->\n\n<!-- ::: -->\n\n\n\n\n\n### Introduction\n\nThere are many different algorithms that try to simulate the next MLB season with a lot of complex statistics. The goal of this was to learn about this model and see how accurate a simulation can be with just a couple simple statistics taken into account.\n\nThis program simulates a 2023 season of all 162 games using the Bradley-Terry model. It uses last year's run differentials (average runs scored minus average runs allowed) to try to estimate this year's top performers.\n\n### Data\n\n`schedule1 <- read_excel(\"schedule.xlsx\")` - reads in a two column excel sheet with headers 'Home' and 'Away' and teams from each game listed below\n\n2022 statistics are from [here](https://www.baseball-reference.com/leagues/majors/2022.shtml).\n\n### Calculations\n\nThe [Bradley-Terry model](https://en.wikipedia.org/wiki/Bradley%E2%80%93Terry_model) is a probability model to predict outcomes of object i beating object j based on each objects ability or talent. In this instance, it is used to compare teams but it was originally to be used with players.\n\nTalent is calculated by z-scores of seasonal average run differential of each team and then divided by 10. The talents were divided by 10 to decrease variation between teams even more. It is then adjusted for home field advantage so 0.04, based on [this](https://sabr.org/journal/article/home-field-advantage/#:~:text=In%20every%20sport%20and%20at,percent%20of%20the%20games%20played.) article, is added to the probability of the home team winning.\n\nThe equation used in this project for probability is:\n\n```         \nprob.Home = exp(Talent.Home) / (exp(Talent.Home) + exp(Talent.Visitor)) + 0.04)\n```\n\nThen, that probability is plugged into another equation to calculate a winner from each game.\n\n```         \noutcome = rbinom(nrow(.), 1, prob.Home), winner = ifelse(outcome, Home, Visitor))\n```\n\nThis equation uses [rbinom](https://www.programmingr.com/examples/neat-tricks/sample-r-function/r-rbinom/) which simulates a series of Bernoulli trials and returns the results. This returns a 1 if the home team wins and a 0 if the visiting team wins.\n\n\n\n::: {.cell}\n\n:::\n\n\n### One simulation\n\nOne season simulation with Wins and Losses from each team using the Bradley Terry model to predict each game.\n\n\n::: {.cell}\n::: {.cell-output-display}\n|        NL East        | Wins|Losses |       NL Cent       | Wins|Losses |       NL West        | Wins|Losses |\n|:---------------------:|----:|:------|:-------------------:|----:|:------|:--------------------:|----:|:------|\n| Philadelphia Phillies |   93|68     |  Milwaukee Brewers  |   89|72     | Arizona Diamondbacks |   89|72     |\n|     New York Mets     |   87|74     | St. Louis Cardinals |   87|74     | Los Angeles Dodgers  |   88|73     |\n|     Miami Marlins     |   81|80     |    Chicago Cubs     |   77|84     | San Francisco Giants |   80|81     |\n|    Atlanta Braves     |   80|81     |   Cincinnati Reds   |   77|84     |   San Diego Padres   |   79|82     |\n| Washington Nationals  |   69|92     | Pittsburgh Pirates  |   70|91     |   Colorado Rockies   |   69|92     |\n:::\n\n::: {.cell-output-display}\n|      AL East      | Wins|Losses |       AL Cent       | Wins|Losses |      AL West       | Wins|Losses |\n|:-----------------:|----:|:------|:-------------------:|----:|:------|:------------------:|----:|:------|\n| New York Yankees  |   97|65     | Kansas City Royals  |   85|77     |  Seattle Mariners  |  102|60     |\n|  Boston Red Sox   |   88|74     |   Minnesota Twins   |   85|77     |   Houston Astros   |   75|87     |\n| Baltimore Orioles |   80|82     | Cleveland Guardians |   78|84     |   Texas Rangers    |   74|88     |\n| Toronto Blue Jays |   78|84     |   Detroit Tigers    |   77|85     | Los Angeles Angels |   73|89     |\n|  Tampa Bay Rays   |   77|85     |  Chicago White Sox  |   74|88     | Oakland Athletics  |   72|90     |\n:::\n:::\n\n\n### 1000 Season Simulations\n\n\n::: {.cell}\n\n:::\n\n\n#### Playoff Percentage\n\nHere is the percentage of seasons in 1000 simulations where each team made the playoffs.\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               | Playoff % |NL Cent             | Playoff % |NL West              | Playoff % |\n|:---------------------|:---------:|:-------------------|:---------:|:--------------------|:---------:|\n|Atlanta Braves        |   70.3%   |St. Louis Cardinals |   64.7%   |Los Angeles Dodgers  |   90.0%   |\n|New York Mets         |   64.2%   |Milwaukee Brewers   |   45.7%   |San Francisco Giants |   50.8%   |\n|Philadelphia Phillies |   45.6%   |Chicago Cubs        |   28.3%   |San Diego Padres     |   41.2%   |\n|Miami Marlins         |   23.3%   |Cincinnati Reds     |   18.1%   |Arizona Diamondbacks |   30.4%   |\n|Washington Nationals  |   7.2%    |Pittsburgh Pirates  |   9.7%    |Colorado Rockies     |   10.5%   |\n:::\n\n::: {.cell-output-display}\n|AL East           | Playoff % |AL Cent             | Playoff % |AL West            | Playoff % |\n|:-----------------|:---------:|:-------------------|:---------:|:------------------|:---------:|\n|New York Yankees  |   79.8%   |Cleveland Guardians |   53.5%   |Houston Astros     |   78.8%   |\n|Toronto Blue Jays |   54.8%   |Minnesota Twins     |   43.0%   |Seattle Mariners   |   41.1%   |\n|Tampa Bay Rays    |   45.8%   |Chicago White Sox   |   33.7%   |Texas Rangers      |   33.3%   |\n|Baltimore Orioles |   33.9%   |Detroit Tigers      |   17.7%   |Los Angeles Angels |   28.6%   |\n|Boston Red Sox    |   29.2%   |Kansas City Royals  |   15.6%   |Oakland Athletics  |   11.2%   |\n:::\n:::\n\n\n#### Win Percentage\n\nHere is the percentage of wins each team had after 1000 seasons\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               | Win % |NL Cent             | Win % |NL West              | Win % |\n|:---------------------|:-----:|:-------------------|:-----:|:--------------------|:-----:|\n|Atlanta Braves        | 53.2% |St. Louis Cardinals | 52.7% |Los Angeles Dodgers  | 56.1% |\n|New York Mets         | 52.7% |Milwaukee Brewers   | 50.9% |San Francisco Giants | 51.2% |\n|Philadelphia Phillies | 51.1% |Chicago Cubs        | 49.0% |San Diego Padres     | 50.5% |\n|Miami Marlins         | 48.3% |Cincinnati Reds     | 47.2% |Arizona Diamondbacks | 49.1% |\n|Washington Nationals  | 45.4% |Pittsburgh Pirates  | 46.1% |Colorado Rockies     | 46.4% |\n:::\n\n::: {.cell-output-display}\n|AL East           | Win % |AL Cent             | Win % |AL West            | Win % |\n|:-----------------|:-----:|:-------------------|:-----:|:------------------|:-----:|\n|New York Yankees  | 54.3% |Cleveland Guardians | 51.5% |Houston Astros     | 54.1% |\n|Toronto Blue Jays | 51.7% |Minnesota Twins     | 50.4% |Seattle Mariners   | 50.4% |\n|Tampa Bay Rays    | 50.7% |Chicago White Sox   | 49.4% |Texas Rangers      | 49.3% |\n|Baltimore Orioles | 49.6% |Detroit Tigers      | 47.4% |Los Angeles Angels | 49.2% |\n|Boston Red Sox    | 48.9% |Kansas City Royals  | 47.0% |Oakland Athletics  | 46.0% |\n:::\n:::\n\n\n### 2023 Season Actual Statistics\n\nHere are the current standings and win percentages of each team in the MLB as of Sept 6th\n\n<!-- ::: callout-note -->\n\n<!-- Looking good. We should update this for current data. In a lot of the preceding code and the following chunk you are taking a pretty blunt approach to setting up your data frames. We should change this so that your tables can be dynamically updated. -->\n\n<!-- ::: -->\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               |Win % |NL Cent             |Win % |NL West              |Win % |\n|:---------------------|:-----|:-------------------|:-----|:--------------------|:-----|\n|Atlanta Braves        |64.2% |Milwaukee Brewers   |56.8% |Los Angeles Dodgers  |61.7% |\n|Philadelphia Phillies |55.6% |Chicago Cubs        |51.2% |Arizona Diamondbacks |51.9% |\n|Miami Marlins         |51.9% |Cincinnati Reds     |50.6% |San Francisco Giants |50.6% |\n|New York Mets         |46.3% |Pittsburgh Pirates  |46.9% |San Diego Padres     |48.8% |\n|Washington Nationals  |43.8% |St. Louis Cardinals |43.8% |Colorado Rockies     |36.4% |\n:::\n\n::: {.cell-output-display}\n|AL East           |Win % |AL Cent             |Win % |AL West            |Win % |\n|:-----------------|:-----|:-------------------|:-----|:------------------|:-----|\n|Baltimore Orioles |62.3% |Minnesota Twins     |53.7% |Houston Astros     |55.6% |\n|Tampa Bay Rays    |61.1% |Cleveland Guardians |48.1% |Seattle Mariners   |55.6% |\n|Toronto Blue Jays |54.9% |Detroit Tigers      |46.9% |Texas Rangers      |54.3% |\n|Boston Red Sox    |50.6% |Chicago White Sox   |37.7% |Los Angeles Angels |45.1% |\n|New York Yankees  |48.1% |Kansas City Royals  |34.6% |Oakland Athletics  |30.9% |\n:::\n:::\n\n\n### Comparison of Projected and Actual Statistics\n\nHere are the projected winning percentage and the actual winning percentage side by side\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               | Actual Win % | Projected Win % |NL Cent             | Actual Win % | Projected Win % |NL West              | Actual Win % | Projected Win % |\n|:---------------------|:------------:|:---------------:|:-------------------|:------------:|:---------------:|:--------------------|:------------:|:---------------:|\n|Atlanta Braves        |    65.5%     |      53.2%      |Milwaukee Brewers   |    55.4%     |      49.0%      |Los Angeles Dodgers  |    61.2%     |      49.1%      |\n|Philadelphia Phillies |    55.4%     |      48.3%      |Chicago Cubs        |    53.9%     |      47.2%      |Arizona Diamondbacks |    51.8%     |      46.4%      |\n|Miami Marlins         |    51.4%     |      52.7%      |Cincinnati Reds     |    51.4%     |      50.9%      |San Francisco Giants |     50%      |      56.1%      |\n|New York Mets         |     46%      |      51.1%      |Pittsburgh Pirates  |    46.4%     |      46.1%      |San Diego Padres     |    46.8%     |      50.5%      |\n|Washington Nationals  |     45%      |      45.4%      |St. Louis Cardinals |    43.6%     |      52.7%      |Colorado Rockies     |    36.7%     |      51.2%      |\n:::\n\n::: {.cell-output-display}\n|AL East           | Actual Win % | Projected Win % |AL Cent             | Actual Win % | Projected Win % |AL West            | Actual Win % | Projected Win % |\n|:-----------------|:------------:|:---------------:|:-------------------|:------------:|:---------------:|:------------------|:------------:|:---------------:|\n|Baltimore Orioles |    63.3%     |      49.6%      |Minnesota Twins     |    52.1%     |      49.4%      |Houston Astros     |    56.7%     |      54.1%      |\n|Tampa Bay Rays    |    60.3%     |      48.9%      |Cleveland Guardians |    47.9%     |      51.5%      |Seattle Mariners   |    56.4%     |      49.2%      |\n|Toronto Blue Jays |     55%      |      54.3%      |Detroit Tigers      |    45.7%     |      47.4%      |Texas Rangers      |    54.7%     |      46.0%      |\n|Boston Red Sox    |    51.4%     |      50.7%      |Chicago White Sox   |    38.6%     |      47.0%      |Los Angeles Angels |    45.7%     |      50.4%      |\n|New York Yankees  |     50%      |      51.7%      |Kansas City Royals  |    31.2%     |      50.4%      |Oakland Athletics  |    36.5%     |      49.3%      |\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n### Comparison of Projected and Actual Statistics - Playoffs\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\nThe slope from this regression line is r = 0.82592 and r\\^2 = 0.6821. This shows there is a strong positive correlation between my projection and the teams that are most likely to make the playoffs. This shows that it can be estimated fairly well whether or not teams make the playoffs based off of just win differential of the previous year and home field advantage.\n\n### Links to resources used\n\n[How FiveThirtyEight does their predictions](https://fivethirtyeight.com/features/how-our-mlb-predictions-work/)\n\n[Playoff Simulator](https://playoffpredictors.com/Baseball?L=Aw18ZXTt-DFOS1b0c17Pd-wYUcSaWeRZVdTbXfQ408y6xQEwCMw7wn7Azvy6CuQ4QLHD+QqZMkyxI+VPEy1I6UtnilowVp3KFE3etOztpqzq2rFB9XN1Xjh88flnH+h06+Wii6WyiESns4qXgoGAYHSZua2blEa9h4ebi7OGgmGomqF4XklTmFpiY5hkRkOoQVV+rHRVRXJKu7BJkFZ1SFNRd2teq3JpWNVPHKaSQkdMz2aNrNZJqOhifEBC4E+Q8F2xTGpMeEDFSfcuctrS0bzm3W9RrkHhafWC8eucz92jUI+BtohZfGDrHkAUtpp1topEEA)\n\n[Simulator in R](https://baseballwithr.wordpress.com/2020/06/29/simulating-a-60-game-season/)\n\n[2022 Updated Playoffs](https://www.sportingnews.com/us/mlb/news/mlb-expanded-playoffs-postseason-2022-teams/sayv4pysmmlopks7hg2o2lbv)\n\n[Home Field Advantage](https://sabr.org/journal/article/home-field-advantage/#:~:text=In%20every%20sport%20and%20at,percent%20of%20the%20games%20played.)\n\n[Contributing Factors in Increasing Winning Percentage](https://digitalcommons.bryant.edu/cgi/viewcontent.cgi?article=1021&context=honors_finance#:~:text=Potential%20factors%20that%20affect%20winning,home%20runs%2C%20runs%20batted%20in)\n\n[2022 Stats](https://www.baseball-reference.com/leagues/majors/2022.shtml)\n\n[2023 Playoff Chances](https://www.fangraphs.com/standings/playoff-odds/fg/div)\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}