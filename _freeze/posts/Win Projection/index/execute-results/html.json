{
  "hash": "8ae11111e3def48b9738e9a7caae54ff",
  "result": {
    "markdown": "---\ntitle: \"Estimating Playoffs Based on the Previous Year's Data\"\nauthor: \"Jonna Waage\"\ndate: \"2023-05-31\"\n---\n\n\n## Can the next MLB season be estimated by the last year's run differential data?\n\n\n\n\n\n### Introduction\n\nSimulates a 2023 season of all 162 games using the Bradley-Terry model.\n\nUses last year's run differentials (average runs scored minus average runs allowed) to try to estimate this year's top performers. \n\n  \n    \n### Data\n\n  `schedule1 <- read_excel(\"schedule.xlsx\")`  - reads in a two column excel sheet with headers 'Home' and 'Away' and teams from each game listed below\n        \n  `battingstats <- read_excel(\"2022battingstats.xlsx\")` - reads in a excel sheet with 2022 MLB batting statistics for all teams \n        \n  `fieldingstats <- read_excel(\"fieldingstats2022.xlsx\")` - reads in a excel sheet with 2022 MLB fielding statistics for all teams\n\n2022 statistics are from [here](https://www.baseball-reference.com/leagues/majors/2022.shtml).\n\n  \n  \n### Calculations\n\nThe [Bradley-Terry model](https://en.wikipedia.org/wiki/Bradley%E2%80%93Terry_model) is a probability model to predict outcomes of object i beating object j based on each objects ability or talent. In this instance, it is used to compare teams but it was originally to be used with players.\n\nTalent is calculated by z-scores of seasonal average run differential of each team and then divided by 10. It is then adjusted for home field advantage so 0.04, based on [this](https://sabr.org/journal/article/home-field-advantage/#:~:text=In%20every%20sport%20and%20at,percent%20of%20the%20games%20played.) article, is added to the probability of the home team winning.\n\nThe equation used in this project for probability is:\n\n    prob.Home = exp(Talent.Home) / (exp(Talent.Home) + exp(Talent.Visitor)) + 0.04)\n\nThen, that probability is plugged into another equation to calculate a winner from each game. \n\n    outcome = rbinom(nrow(.), 1, prob.Home), winner = ifelse(outcome, Home, Visitor))\n    \nThis equation uses [rbinom](https://www.programmingr.com/examples/neat-tricks/sample-r-function/r-rbinom/) which simulates a series of Bernoulli trials and returns the results. This returns a 1 if the home team wins and a 0 if the visiting team wins. \n\n\n\n::: {.cell}\n\n:::\n\n\n\n<!-- Also I am adding several helper functions `increasefont()` and `centertitle()` that I will use in ggplot2. -->\n\n<!-- ```{r} -->\n<!-- increasefont <- function(Size = 18){ -->\n<!--   theme(text = element_text(size = Size)) -->\n<!-- } -->\n\n<!-- centertitle <- function(Color = \"blue\"){ -->\n<!--     theme(plot.title =  -->\n<!--             element_text(colour = Color, size = 18,  -->\n<!--         hjust = 0.5, vjust = 0.8, angle = 0)) -->\n<!-- } -->\n<!-- ``` -->\n\n\n### One simulation\n\nOne season simulation with Wins and Losses from each team using the Bradley Terry model to predict each game. \n\n\n::: {.cell}\n::: {.cell-output-display}\n|        NL East        | Wins|Losses |       NL Cent       | Wins|Losses |       NL West        | Wins|Losses |\n|:---------------------:|----:|:------|:-------------------:|----:|:------|:--------------------:|----:|:------|\n| Philadelphia Phillies |   86|75     |  Milwaukee Brewers  |   83|78     | Los Angeles Dodgers  |   89|72     |\n|     New York Mets     |   81|80     | St. Louis Cardinals |   82|79     |   San Diego Padres   |   87|74     |\n| Washington Nationals  |   75|86     | Pittsburgh Pirates  |   79|82     | San Francisco Giants |   80|81     |\n|    Atlanta Braves     |   71|90     |   Cincinnati Reds   |   75|86     | Arizona Diamondbacks |   77|84     |\n|     Miami Marlins     |   70|91     |    Chicago Cubs     |   71|90     |   Colorado Rockies   |   77|84     |\n:::\n\n::: {.cell-output-display}\n|      AL East      | Wins|Losses |       AL Cent       | Wins|Losses |      AL West       | Wins|Losses |\n|:-----------------:|----:|:------|:-------------------:|----:|:------|:------------------:|----:|:------|\n| New York Yankees  |   91|71     | Cleveland Guardians |   91|71     |   Texas Rangers    |   84|78     |\n| Toronto Blue Jays |   90|72     |   Minnesota Twins   |   87|75     |  Seattle Mariners  |   83|79     |\n|  Boston Red Sox   |   89|73     |  Chicago White Sox  |   83|79     |   Houston Astros   |   82|80     |\n| Baltimore Orioles |   86|76     |   Detroit Tigers    |   76|86     | Oakland Athletics  |   76|86     |\n|  Tampa Bay Rays   |   86|76     | Kansas City Royals  |   72|90     | Los Angeles Angels |   71|91     |\n:::\n:::\n\n  \n  \n### 1000 Season Simulations\n  \n\n::: {.cell}\n\n:::\n\n\n#### Playoff Percentage\n\nHere is the percentage of seasons in 1000 simulations where each team made the playoffs. \n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               | Playoff % |NL Cent             | Playoff % |NL West              | Playoff % |\n|:---------------------|:---------:|:-------------------|:---------:|:--------------------|:---------:|\n|New York Mets         |   69.8%   |St. Louis Cardinals |   67.2%   |Los Angeles Dodgers  |   89.1%   |\n|Atlanta Braves        |   67.7%   |Milwaukee Brewers   |   50.0%   |San Francisco Giants |   48.5%   |\n|Philadelphia Phillies |   48.7%   |Chicago Cubs        |   24.6%   |San Diego Padres     |   42.2%   |\n|Miami Marlins         |   23.0%   |Cincinnati Reds     |   13.8%   |Arizona Diamondbacks |   25.9%   |\n|Washington Nationals  |   6.9%    |Pittsburgh Pirates  |   9.5%    |Colorado Rockies     |   13.1%   |\n:::\n\n::: {.cell-output-display}\n|AL East           | Playoff % |AL Cent             | Playoff % |AL West            | Playoff % |\n|:-----------------|:---------:|:-------------------|:---------:|:------------------|:---------:|\n|New York Yankees  |   78.5%   |Cleveland Guardians |   52.9%   |Houston Astros     |   78.9%   |\n|Toronto Blue Jays |   53.0%   |Minnesota Twins     |   47.1%   |Seattle Mariners   |   41.5%   |\n|Tampa Bay Rays    |   44.1%   |Chicago White Sox   |   35.8%   |Los Angeles Angels |   30.7%   |\n|Baltimore Orioles |   32.8%   |Kansas City Royals  |   17.9%   |Texas Rangers      |   29.8%   |\n|Boston Red Sox    |   29.0%   |Detroit Tigers      |   17.5%   |Oakland Athletics  |   10.5%   |\n:::\n:::\n\n  \n#### Win Percentage\n\n\nHere is the percentage of wins each team had after 1000 seasons\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               | Win % |NL Cent             | Win % |NL West              | Win % |\n|:---------------------|:-----:|:-------------------|:-----:|:--------------------|:-----:|\n|New York Mets         | 53.2% |St. Louis Cardinals | 52.8% |Los Angeles Dodgers  | 56.0% |\n|Atlanta Braves        | 53.0% |Milwaukee Brewers   | 51.1% |San Francisco Giants | 51.0% |\n|Philadelphia Phillies | 51.2% |Chicago Cubs        | 48.7% |San Diego Padres     | 50.6% |\n|Miami Marlins         | 48.4% |Cincinnati Reds     | 47.1% |Arizona Diamondbacks | 49.0% |\n|Washington Nationals  | 45.4% |Pittsburgh Pirates  | 46.1% |Colorado Rockies     | 46.6% |\n:::\n\n::: {.cell-output-display}\n|AL East           | Win % |AL Cent             | Win % |AL West            | Win % |\n|:-----------------|:-----:|:-------------------|:-----:|:------------------|:-----:|\n|New York Yankees  | 54.2% |Cleveland Guardians | 51.2% |Houston Astros     | 54.1% |\n|Toronto Blue Jays | 51.5% |Minnesota Twins     | 50.7% |Seattle Mariners   | 50.3% |\n|Tampa Bay Rays    | 50.7% |Chicago White Sox   | 49.6% |Texas Rangers      | 49.3% |\n|Baltimore Orioles | 49.5% |Detroit Tigers      | 47.4% |Los Angeles Angels | 49.2% |\n|Boston Red Sox    | 49.0% |Kansas City Royals  | 47.1% |Oakland Athletics  | 46.1% |\n:::\n:::\n\n  \n  \n### 2023 Season Actual Statistics\n\nHere are the current standings and win percentages of each team in the MLB as of June 13th\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               |Win % |NL Cent             |Win % |NL West              |Win % |\n|:---------------------|:-----|:-------------------|:-----|:--------------------|:-----|\n|Atlanta Braves        |60.6% |Pittsburgh Pirates  |52.3% |Arizona Diamondbacks |61.2% |\n|Miami Marlins         |54.4% |Milwaukee Brewers   |50.7% |Los Angeles Dodgers  |56.7% |\n|Philadelphia Phillies |49.3% |Cincinnati Reds     |48.5% |San Francisco Giants |52.2% |\n|New York Mets         |46.3% |Chicago Cubs        |43.9% |San Diego Padres     |48.5% |\n|Washington Nationals  |40%   |St. Louis Cardinals |39.7% |Colorado Rockies     |42%   |\n:::\n\n::: {.cell-output-display}\n|AL East           |Win % |AL Cent             |Win % |AL West            |Win % |\n|:-----------------|:-----|:-------------------|:-----|:------------------|:-----|\n|Tampa Bay Rays    |68.6% |Minnesota Twins     |50.7% |Texas Rangers      |62.1% |\n|Baltimore Orioles |63.6% |Cleveland Guardians |47.0% |Houston Astros     |56.7% |\n|New York Yankees  |57.4% |Chicago White Sox   |42.6% |Los Angeles Angels |55.1% |\n|Toronto Blue Jays |54.4% |Detroit Tigers      |42.2% |Seattle Mariners   |50%   |\n|Boston Red Sox    |48.5% |Kansas City Royals  |26.9% |Oakland Athletics  |27.5% |\n:::\n:::\n\n  \n    \n### Comparison of Projected and Actual Statistics\n\nHere are the projected winning percentage and the actual winning percentage side by side\n\n\n::: {.cell}\n::: {.cell-output-display}\n|NL East               | Actual Win % | Projected Win % |NL Cent             | Actual Win % | Projected Win % |NL West              | Actual Win % | Projected Win % |\n|:---------------------|:------------:|:---------------:|:-------------------|:------------:|:---------------:|:--------------------|:------------:|:---------------:|\n|Atlanta Braves        |    60.6%     |      53.0%      |Chicago Cubs        |    43.9%     |      48.7%      |Arizona Diamondbacks |    61.2%     |      49.0%      |\n|Miami Marlins         |    54.4%     |      48.4%      |Cincinnati Reds     |    48.5%     |      47.1%      |Colorado Rockies     |     42%      |      46.6%      |\n|New York Mets         |    46.3%     |      53.2%      |Milwaukee Brewers   |    50.7%     |      51.1%      |Los Angeles Dodgers  |    56.7%     |      56.0%      |\n|Philadelphia Phillies |    49.3%     |      51.2%      |Pittsburgh Pirates  |    52.3%     |      46.1%      |San Diego Padres     |    48.5%     |      50.6%      |\n|Washington Nationals  |     40%      |      45.4%      |St. Louis Cardinals |    39.7%     |      52.8%      |San Francisco Giants |    52.2%     |      51.0%      |\n:::\n\n::: {.cell-output-display}\n|AL East           | Actual Win % | Projected Win % |AL Cent             | Actual Win % | Projected Win % |AL West            | Actual Win % | Projected Win % |\n|:-----------------|:------------:|:---------------:|:-------------------|:------------:|:---------------:|:------------------|:------------:|:---------------:|\n|Baltimore Orioles |    63.6%     |      49.5%      |Chicago White Sox   |    42.6%     |      49.6%      |Houston Astros     |    56.7%     |      54.1%      |\n|Boston Red Sox    |    48.5%     |      49.0%      |Cleveland Guardians |    47.0%     |      51.2%      |Los Angeles Angels |    55.1%     |      49.2%      |\n|New York Yankees  |    57.4%     |      54.2%      |Detroit Tigers      |    42.2%     |      47.4%      |Oakland Athletics  |    27.5%     |      46.1%      |\n|Tampa Bay Rays    |    68.6%     |      50.7%      |Kansas City Royals  |    26.9%     |      47.1%      |Seattle Mariners   |     50%      |      50.3%      |\n|Toronto Blue Jays |    54.4%     |      51.5%      |Minnesota Twins     |    50.7%     |      50.7%      |Texas Rangers      |    62.1%     |      49.3%      |\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n### Links to resources used\n\n[How FiveThirtyEight does their predictions](https://fivethirtyeight.com/features/how-our-mlb-predictions-work/)\n\n[Playoff Simulator](https://playoffpredictors.com/Baseball?L=Aw18ZXTt-DFOS1b0c17Pd-wYUcSaWeRZVdTbXfQ408y6xQEwCMw7wn7Azvy6CuQ4QLHD+QqZMkyxI+VPEy1I6UtnilowVp3KFE3etOztpqzq2rFB9XN1Xjh88flnH+h06+Wii6WyiESns4qXgoGAYHSZua2blEa9h4ebi7OGgmGomqF4XklTmFpiY5hkRkOoQVV+rHRVRXJKu7BJkFZ1SFNRd2teq3JpWNVPHKaSQkdMz2aNrNZJqOhifEBC4E+Q8F2xTGpMeEDFSfcuctrS0bzm3W9RrkHhafWC8eucz92jUI+BtohZfGDrHkAUtpp1topEEA)\n\n[Simulator in R](https://baseballwithr.wordpress.com/2020/06/29/simulating-a-60-game-season/)\n\n[2022 Updated Playoffs](https://www.sportingnews.com/us/mlb/news/mlb-expanded-playoffs-postseason-2022-teams/sayv4pysmmlopks7hg2o2lbv)\n\n[Home Field Advantage](https://sabr.org/journal/article/home-field-advantage/#:~:text=In%20every%20sport%20and%20at,percent%20of%20the%20games%20played.)\n\n[Contributing Factors in Increasing Winning Percentage](https://digitalcommons.bryant.edu/cgi/viewcontent.cgi?article=1021&context=honors_finance#:~:text=Potential%20factors%20that%20affect%20winning,home%20runs%2C%20runs%20batted%20in)\n\n[2022 Stats](https://www.baseball-reference.com/leagues/majors/2022.shtml)\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}